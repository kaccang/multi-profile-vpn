# VPN Multi-Profile Manager - Site Configuration Template
# This is a template - actual files will be generated by profile-manager.sh
#
# Naming: {domain}.conf
# Location: /etc/xray-multi/nginx/sites/{domain}.conf
#
# Variables that will be replaced:
# - {{DOMAIN}} = Profile domain (e.g., vpn1.example.com)
# - {{PROFILE_NAME}} = Profile name (e.g., client1)
# - {{CONTAINER_IP}} = Docker container IP (e.g., 172.20.1.2)
# - {{VMESS_PATH}} = Custom VMess WebSocket path
# - {{VLESS_PATH}} = Custom VLess WebSocket path
# - {{TROJAN_PATH}} = Custom Trojan WebSocket path
#
# Example generated config:
#
# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name vpn1.example.com;
#
#     # SSL Configuration
#     ssl_certificate /etc/xray-multi/ssl-manager/certs/vpn1.example.com/fullchain.pem;
#     ssl_certificate_key /etc/xray-multi/ssl-manager/certs/vpn1.example.com/privkey.pem;
#     ssl_trusted_certificate /etc/xray-multi/ssl-manager/certs/vpn1.example.com/chain.pem;
#
#     include /etc/xray-multi/nginx/ssl-params.conf;
#
#     # Access & Error Logs
#     access_log /var/log/nginx/vpn1.example.com-access.log main;
#     error_log /var/log/nginx/vpn1.example.com-error.log warn;
#
#     # Default location
#     location / {
#         return 403 "Forbidden";
#     }
#
#     # VMess WebSocket
#     location /custom-vmess-path {
#         if ($http_upgrade != "websocket") {
#             return 404;
#         }
#
#         proxy_pass http://172.20.1.2:10001;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection $connection_upgrade;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#
#         proxy_buffering off;
#         proxy_redirect off;
#         proxy_connect_timeout 60s;
#         proxy_send_timeout 3600s;
#         proxy_read_timeout 3600s;
#
#         limit_req zone=ws burst=20 nodelay;
#     }
#
#     # VLess WebSocket
#     location /custom-vless-path {
#         if ($http_upgrade != "websocket") {
#             return 404;
#         }
#
#         proxy_pass http://172.20.1.2:10002;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection $connection_upgrade;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#
#         proxy_buffering off;
#         proxy_redirect off;
#         proxy_connect_timeout 60s;
#         proxy_send_timeout 3600s;
#         proxy_read_timeout 3600s;
#
#         limit_req zone=ws burst=20 nodelay;
#     }
#
#     # Trojan WebSocket
#     location /custom-trojan-path {
#         if ($http_upgrade != "websocket") {
#             return 404;
#         }
#
#         proxy_pass http://172.20.1.2:10003;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection $connection_upgrade;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#
#         proxy_buffering off;
#         proxy_redirect off;
#         proxy_connect_timeout 60s;
#         proxy_send_timeout 3600s;
#         proxy_read_timeout 3600s;
#
#         limit_req zone=ws burst=20 nodelay;
#     }
# }
